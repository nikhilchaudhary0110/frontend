<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynamic To-Do List</title>
    <style>
        body {
            font-family: Arial;
            background: #710f0f;
            padding: 20px;
        }
        #container {
            width: 350px;
            margin: auto;
            background: #66a51a;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        ul li {
            background: #eaeaea;
            padding: 10px;
            margin: 6px 0;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        button {
            margin-left: 6px;
        }
    </style>
</head>
<body>
<div id="container">
    <h2>To-Do List</h2>
    
    <input type="text" id="taskInput" placeholder="Enter task...">
    <button onclick="addTask()">Add Task</button>

    <ul id="taskList"></ul>
</div>

<script>
    window.onload = function () {
        loadTasks();
    };

    function addTask() {
        const input = document.getElementById("taskInput");
        const taskText = input.value.trim();

        if (taskText === "") {
            alert("Please enter a task");
            return;
        }

        createTaskElement(taskText);
        saveTask(taskText);

        input.value = "";
    }

    function createTaskElement(taskText) {
        const ul = document.getElementById("taskList");

        const li = document.createElement("li");

        const span = document.createElement("span");
        span.innerText = taskText;

        const editBtn = document.createElement("button");
        editBtn.innerText = "Edit";
        editBtn.onclick = function () {
            const newText = prompt("Edit task:", span.innerText);
            if (newText !== null && newText.trim() !== "") {
                updateTask(span.innerText, newText);
                span.innerText = newText;
            }
        };

        const deleteBtn = document.createElement("button");
        deleteBtn.innerText = "Delete";
        deleteBtn.onclick = function () {
            ul.removeChild(li);
            deleteTask(taskText);
        };

        li.appendChild(span);
        li.appendChild(editBtn);
        li.appendChild(deleteBtn);
        ul.appendChild(li);
    }

    function saveTask(task) {
        let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
        tasks.push(task);
        localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    function deleteTask(task) {
        let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
        tasks = tasks.filter(t => t !== task);
        localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    function updateTask(oldTask, newTask) {
        let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
        const index = tasks.indexOf(oldTask);
        tasks[index] = newTask;
        localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    function loadTasks() {
        let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
        tasks.forEach(task => createTaskElement(task));
    }
</script>

</body>
</html>
